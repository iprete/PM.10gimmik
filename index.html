<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Rune Puzzle</title><style>html,body{margin:0;height:100%}body{background:#000;color:#fff;font-family:sans-serif;display:flex;align-items:center;justify-content:center}button{background:#222;border:none;border-radius:6px;color:#fff;cursor:pointer}.view{display:none;flex-direction:column;align-items:center;gap:24px}.active{display:flex}.rules{font-size:.9rem;text-align:center;line-height:1.4;opacity:.9}.level-btn{min-width:130px;height:64px;font-size:1.1rem;margin:4px}.level-btn:hover,#homeBtn:hover,#fsBtn:hover,#resetBtn:hover{background:#555}#legend{display:flex;gap:18px;margin-top:10px}.legend-block{display:grid;grid-template-columns:repeat(7,10px);grid-auto-rows:10px;gap:1px}.square{width:10px;height:10px;background:#333}.legend-title{font-size:.75rem;opacity:.8;text-align:center;margin-top:3px}#game{gap:20px;position:relative}#homeBtn,#fsBtn{position:absolute;top:-44px;padding:6px 12px;background:#444}#homeBtn{left:0}#fsBtn{right:0}#resetBtn{padding:6px 14px;background:#444}#board{display:grid;gap:6px}.cell{width:60px;height:60px;box-shadow:0 0 4px rgba(255,255,255,.15);transition:filter .1s}.cell:hover{filter:brightness(1.25)}.c0{background:#ff0033}.c1{background:#ffd800}.c2{background:#00ff33}.c3{background:#0066ff}#dots{display:flex;gap:8px}.dot{width:14px;height:14px;background:#fff;border-radius:50%}</style></head><body><div id="menu" class="view active"><h1>난이도 선택</h1><div class="rules"><strong>규칙</strong> : 셀 클릭 시 색이 <em>빨→노→초→파→빨</em> 순으로 변하고,<br>동시에 맨해튼&nbsp;거리 ≤ 색별 반경(빨1·노2·초3·파4)인 주변 칸도 변합니다.<br>남은 클릭 수는 점(dot)으로 표시, 모든 칸 색이 같아지면 성공!</div><div id="legend"></div><div id="levels"></div></div><div id="game" class="view"><button id="homeBtn">HOME</button><button id="fsBtn">⤢</button><div id="dots"></div><div id="board"></div><button id="resetBtn">RESET</button></div><script>/* === 퍼즐 데이터 === */const puzzles={veryeasy:{size:7,max:2,sol:[[6,0],[0,6]]},normal:{size:5,max:3,sol:[[1,1],[4,4],[0,2]]},hard:{size:5,max:5,sol:[[2,1],[3,0],[0,4],[4,3],[1,2]]},extreme:{size:7,max:5,sol:[[5,5],[3,2],[0,6],[2,1],[4,4]]},infinite:{size:7,max:0,sol:[],inf:1}};const order=['veryeasy','normal','hard','extreme','infinite'];const names={veryeasy:'매우쉬움',normal:'보통',hard:'상',extreme:'극상',infinite:'무한'};/* === DOM === */const menu=document.getElementById('menu'),game=document.getElementById('game'),levels=document.getElementById('levels'),legend=document.getElementById('legend'),homeBtn=document.getElementById('homeBtn'),fsBtn=document.getElementById('fsBtn'),resetBtn=document.getElementById('resetBtn'),dotsEl=document.getElementById('dots'),boardEl=document.getElementById('board');/* === 전역 상태 === */let curKey='veryeasy',SIZE,MAX,sol,board,clicks=0;/* === 레전드 === */(()=>{const colors=['#ff0033','#ffd800','#00ff33','#0066ff'];for(let i=0;i<4;i++){const wrap=document.createElement('div');wrap.style.display='flex';wrap.style.flexDirection='column';wrap.style.alignItems='center';const block=document.createElement('div');block.className='legend-block';for(let y=0;y<7;y++){for(let x=0;x<7;x++){const sq=document.createElement('div');sq.className='square';if(Math.abs(x-3)+Math.abs(y-3)<=i+1)sq.style.background=colors[i];block.appendChild(sq);}}const lab=document.createElement('div');lab.className='legend-title';lab.textContent=['빨1','노2','초3','파4'][i];wrap.appendChild(block);wrap.appendChild(lab);legend.appendChild(wrap);}})();/* === 난이도 버튼 === */order.forEach(k=>{const b=document.createElement('button');b.textContent=names[k];b.className='level-btn';b.onclick=()=>{curKey=k;showGame();};levels.appendChild(b);});/* === 공통 함수 === */function showMenu(){menu.classList.add('active');game.classList.remove('active');}function showGame(){initPuzzle(puzzles[curKey]);menu.classList.remove('active');game.classList.add('active');}function initPuzzle(cfg){SIZE=cfg.size;MAX=cfg.max;sol=cfg.sol;board=Array.from({length:SIZE},_=>Array(SIZE).fill(0));if(cfg.inf){for(let r=0;r<SIZE;r++)board[r].fill(3);}else{const rad=[1,2,3,4];const inv=(r,c)=>{const col=board[r][c],radv=rad[col];board[r][c]=(col+3)%4;for(let i=0;i<SIZE;i++)for(let j=0;j<SIZE;j++)if(Math.abs(i-r)+Math.abs(j-c)<=radv && !(i===r&&j===c))board[i][j]=(board[i][j]+3)%4;};[...sol].reverse().forEach(([r,c])=>inv(r,c));}clicks=0;buildDots();buildBoard();}function buildDots(){dotsEl.innerHTML='';if(MAX<1){dotsEl.style.display='none';return;}dotsEl.style.display='flex';for(let i=0;i<MAX;i++){const d=document.createElement('div');d.className='dot';dotsEl.appendChild(d);}}function buildBoard(){boardEl.innerHTML='';boardEl.style.gridTemplateColumns=`repeat(${SIZE},60px)`;boardEl.style.gridAutoRows='60px';for(let r=0;r<SIZE;r++)for(let c=0;c<SIZE;c++){const cell=document.createElement('div');cell.className='cell c'+board[r][c];cell.dataset.r=r;cell.dataset.c=c;cell.onclick=cellClick;boardEl.appendChild(cell);}renderBoard();}function cellClick(e){if(MAX>0&&clicks>=MAX)return;const r=+e.target.dataset.r,c=+e.target.dataset.c;forward(r,c);clicks++;updateDots();renderBoard();if(!puzzles[curKey].inf&&isSolved())setTimeout(()=>alert('Solved!'),10);}function forward(r,c){const col=board[r][c],rad=[1,2,3,4][col];board[r][c]=(col+1)%4;for(let i=0;i<SIZE;i++)for(let j=0;j<SIZE;j++)if(Math.abs(i-r)+Math.abs(j-c)<=rad && !(i===r&&j===c))board[i][j]=(board[i][j]+1)%4;}function updateDots(){if(MAX<1)return;[...dotsEl.children][MAX-clicks]?.style.setProperty('visibility','hidden');}function renderBoard(){boardEl.querySelectorAll('.cell').forEach(cell=>{const r=+cell.dataset.r,c=+cell.dataset.c;cell.className='cell c'+board[r][c];});}function isSolved(){return board.flat().every(v=>v===board[0][0]);}function reset(){initPuzzle(puzzles[curKey]);}/* === 전체화면 === */function toggleFull(){if(!document.fullscreenElement){document.documentElement.requestFullscreen();fsBtn.textContent='⤢';}else{document.exitFullscreen();fsBtn.textContent='⤢';}}/* === 이벤트 === */homeBtn.onclick=showMenu;fsBtn.onclick=toggleFull;document.addEventListener('keydown',e=>{'fF'.includes(e.key)&&toggleFull();});resetBtn.onclick=reset;/* === 초기 === */showMenu();</script></body></html>
